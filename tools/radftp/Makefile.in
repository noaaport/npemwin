#
# $Id$
#
@include@ @q@../../Makefile.inc@q@

INSTALL =	@INSTALL@
SHELL =		@SHELL@

SAMPLES =	radftp.conf-sample radftp.conf-site-sample \
		radftp-plist.conf-sample \
		radftp-slist.conf-sample

LIBTOOLS =	radftp
TARGET =	${LIBTOOLS} ${SAMPLES}
DEPS =		radftp_get_datetime.bsd radftp_get_datetime.linux

RADFTPCONFDIR = ${MYCONFDIR}

GET_DATETIME =	@GET_DATETIME@

all: ${TARGET}

radftp: radftp.sh.in ${DEPS}
	sed -e "/%SHELL%/s##${SHELL}#" \
	-e "/%RADFTPCONFDIR%/s##${RADFTPCONFDIR}#" \
	-e "/%GET_DATETIME%/r ${GET_DATETIME}" \
	-e "/%GET_DATETIME%/d" \
	radftp.sh.in > radftp

radftp.conf-sample: radftp.conf.in
	sed -e "/%RADFTPCONFDIR%/s##${RADFTPCONFDIR}#" \
	radftp.conf.in > radftp.conf-sample

radftp-plist.conf-sample: radftp-plist.conf
	cp radftp-plist.conf radftp-plist.conf-sample

radftp-slist.conf-sample: radftp-slist.conf
	cp radftp-slist.conf radftp-slist.conf-sample

radftp.conf-site-sample: radftp.conf-site
	cp radftp.conf-site radftp.conf-site-sample

install:
	${INSTALL} -m 0644 ${SAMPLES} ${MYCONFDIR}
	${INSTALL} -m 0755 ${LIBTOOLS} ${MYLIBEXECDIR}

clean:
	rm -f *~ ${TARGET} Makefile
